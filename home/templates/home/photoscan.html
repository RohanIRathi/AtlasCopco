{% extends 'home/base.html' %} {% block content %}


    <main style="margin-top: 30px;">
        <div class="container-fluid">
            <!-- DataTales Example -->
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h5 class="m-0 font-weight-bold text-primary">Scan Photo & ID: Visitor no. {{ current_visitor }}
                    </h5>
                </div>
                <div class="card-body mt-3">
                    <div class="modal" id="livestream_photo">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Capture Photo</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body" style="position: static">
                                    <div id="interactive" class="viewport">
                                        <video crossorigin="anonymous" autoplay width="300px" height="300px" id="photo-interactive-video"></video>
                                        <canvas id="photo-canvas"></canvas>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <!--<label class="btn btn-default pull-left">
                                        <i class="fa fa-camera"></i> Use camera app
                                        <input type="file" accept="image/*;capture=camera" capture="camera" class="hidden">
                                    </label>-->
                                    <button type="button" id="photo-capture" class="btn btn-primary">Capture</button>
                                    <button type="submit" class="btn btn-success" data-dismiss="modal">Submit</button>
                                </div>
                            </div> <!-- /.modal-content -->
                        </div> <!-- /.modal-dialog -->
                    </div> <!-- /.modal -->
                    <div class="modal" id="livestream_photo_id">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title">Capture Photo Id</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body" style="position: static">
                                    <div id="interactive" class="viewport">
                                        <video crossorigin="anonymous" autoplay width="300px" height="300px" id="photo-id-interactive-video"></video>
                                        <canvas id="photo-id-canvas"></canvas>
                                    </div>
                                    <div class="error"></div>
                                </div>
                                <div class="modal-footer">
                                    <!--<label class="btn btn-default pull-left">
                                        <i class="fa fa-camera"></i> Use camera app
                                        <input type="file" accept="image/*;capture=camera" capture="camera" class="hidden">
                                    </label>-->
                                    <button type="button" id="photo-id-capture" class="btn btn-primary">Capture</button>
                                    <button type="submit" class="btn btn-success" data-dismiss="modal">Submit</button>
                                </div>
                            </div> <!-- /.modal-content -->
                        </div> <!-- /.modal-dialog -->
                    </div> <!-- /.modal -->
                        <form method="post" onsubmit="return confirm('Is Security Training Given?');">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group row col-md-12 col-form-label">Purpose of Visit: {{ visitor.purpose }}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group row col-md-12 col-form-label">Employee to Visit: {{ visitor.user.first_name }} {{ visitor.user.last_name }}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group row col-md-12 col-form-label">Booked Visitor: <input type="hidden" value="{{ visitor.id }}" disabled name="visitor">{{ visitor.name }}
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-4">
                                    <div class="form-group row">
                                        <label for="actual_visitors" class="col-md-6 col-form-label">Actual No. of Visitors:</label> 
                                        <div class="col-md-6"><input type="number" class="form-control"{% if visitor.actual_visitors %} value="{{ visitor.actual_visitors }}" disabled{% else %} required{% endif %} name="actual_visitors"></div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group row">
                                        <label for="name" class="col-md-3 col-form-label">Name:</label>
                                        <div class="col-md-9"><input type="text" class="form-control" {% if current_visitor == 1 %} value="{{ visitor.name }}" {% endif %}name="name" placeholder="Name of visitor" required></div>
                                        {% if form.name.errors %}{% for error in form.name.errors %}{{ error }}{% endfor %}{% endif %}
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group row">
                                        <label for="email" class="col-md-3 col-form-label">E-mail:</label>
                                        <div class="col-md-9"><input type="email" class="form-control" {% if current_visitor == 1 %} value="{{ visitor.email }}" {% endif %}name="email" placeholder="Email of visitor" required></div>
                                    {% if form.email.errors %}{% for error in form.email.errors %}{{ error }}{% endfor %}{% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-3">
                                    <div class="form-group row">
                                        <label for="photo" class="col-md-5 col-form-label">Scan Photo<span class="text-danger">*</span></label>
                                        <div class="col-md-7"><input type="hidden" id="photo" name="photo"><button data-toggle="modal" id="photobutton" data-target="#livestream_photo" type="button" class="btn btn-info">Take Photo</button></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group row">
                                        <label for="mobile" class="col-md-4 col-form-label">Mobile Number<span class="text-danger">*</span></label>
                                        <div class="col-md-8"><input type="text" class="form-control" {% if form.mobile.value %}value="{{ form.mobile.value }}"{% endif %} name="mobile" placeholder="Enter Mobile Number" required></div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group row">
                                        <label for="photo_id" class="col-md-4 col-form-label">Scan Id<span class="text-danger">*</span></label>
                                        <div class="col-md-8"><input type="hidden" id="photo_id" name="photo_id"><button data-toggle="modal" data-target="#livestream_photo_id" type="button" class="btn btn-info">Take ID</button></div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right mt-3">
                                <input class="text-right btn btn-success mr-2" type="submit" value="Add Visitor">
                                <a href="{% url 'home' %}"><button class="text-right btn btn-success" type="button">Add Later</button></a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>
{% endblock content %}